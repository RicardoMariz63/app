<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popa Boreste</title>
    <style>
        body {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background: #f8f8f8;
            font-family: sans-serif;
        }
        .central-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-top: 10px;
        }
        .row {
            width: 100%;
            margin: 12px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .row.row3 {
            background: #f0f0f0;
            border-radius: 5px;
        }
        .row.row4 {
            background: #f0f0f0;
            border-radius: 5px;
        }
        .row.row3 input[type="number"], .row.row4 input[type="number"] {
            background: yellow;
        }
        input[type="text"], input[type="number"] {
            margin-bottom: 15px;
            padding: 10px;
            font-size: 1.1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 200px;
            text-align: center;
        }
        input[type="number"] {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="central-col">
        <!-- Bot√£o Silenciar dentro do container -->
        <div style="
            width: 100%;
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        ">
            <button id="botao-silenciar-alarme2" onclick="silenciarAlarme2()" style="
                padding: 12px 20px;
                font-size: 14px;
                background-color: #F44336;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                box-shadow: 0 2px 6px rgba(0,0,0,0.3);
                transition: background-color 0.3s, transform 0.2s;
                font-weight: bold;
            " onmouseover="this.style.backgroundColor='#D32F2F'; this.style.transform='scale(1.05)'" onmouseout="this.style.backgroundColor='#F44336'; this.style.transform='scale(1)'">
                üîá Silenciar
            </button>
        </div>
        <div class="row">
            <div style="display: flex; flex-direction: column; align-items: center;">
                <label for="input-row1">DOCAGEM</label>
                <input type="text" id="input-row1" placeholder="Digite seu nome">
            </div>
        </div>
        <div class="row">
            <label>POPA BORESTE</label>
        </div>
        
        <div class="row row4">
            <span>Z:</span>
            <input type="number" id="input-zpopaboreste" placeholder="0" style="margin-left: 10px; width: 100px; margin-top: 10px;">
        </div>
    </div>

    <!-- Bot√£o Ativar (aparece ap√≥s refresh) -->
    <div id="botao-ativar-container" style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000;
    ">
        <button id="botao-ativar" onclick="ativarSistema()" style="
            padding: 20px 40px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
        " onmouseover="this.style.backgroundColor='#45a049'; this.style.transform='scale(1.05)'" onmouseout="this.style.backgroundColor='#4CAF50'; this.style.transform='scale(1)'">
            ‚úÖ Ativar
        </button>
    </div>

    <script src="/sync.js"></script>
    <script>
        // Habilitar sistema de alarme2 automaticamente
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîä PopaBoreste.html - Habilitando sistema de alarme2');
            
            // Aguardar sistema de sincroniza√ß√£o carregar
            setTimeout(() => {
                if (window.sistemaSync && window.sistemaSync.audioAlarme2) {
                    // Tentar habilitar √°udio com volume muito baixo
                    window.sistemaSync.audioAlarme2.volume = 0.01;
                    window.sistemaSync.audioAlarme2.play().then(() => {
                        window.sistemaSync.audioAlarme2.pause();
                        window.sistemaSync.audioAlarme2.currentTime = 0;
                        window.sistemaSync.audioAlarme2.volume = 0.8;
                        console.log('‚úÖ Sistema de alarme2 habilitado em PopaBoreste.html');
                    }).catch(() => {
                        console.log('‚ö†Ô∏è Aguardando intera√ß√£o para habilitar alarme2');
                        // Habilitar no primeiro clique
                        document.addEventListener('click', function habilitarUmaVez() {
                            if (window.sistemaSync && window.sistemaSync.audioAlarme2) {
                                window.sistemaSync.audioAlarme2.volume = 0.01;
                                window.sistemaSync.audioAlarme2.play().then(() => {
                                    window.sistemaSync.audioAlarme2.pause();
                                    window.sistemaSync.audioAlarme2.currentTime = 0;
                                    window.sistemaSync.audioAlarme2.volume = 0.8;
                                    console.log('‚úÖ Sistema de alarme2 habilitado via clique');
                                }).catch(() => {});
                                document.removeEventListener('click', habilitarUmaVez);
                            }
                        });
                    });
                }
            }, 2000);
        });
    </script>
    <script>
        // Fun√ß√£o para silenciar alarme2
        function silenciarAlarme2() {
            if (window.sistemaSync) {
                window.sistemaSync.silenciarAlarme2Permanente();
                console.log('üîá Alarme2 silenciado permanentemente em PopaBoreste.html');
                
                // Feedback visual no bot√£o
                const botao = document.getElementById('botao-silenciar-alarme2');
                const textoOriginal = botao.innerHTML;
                botao.innerHTML = '‚úÖ Silenciado';
                botao.style.backgroundColor = '#4CAF50';
                
                setTimeout(() => {
                    botao.innerHTML = textoOriginal;
                    botao.style.backgroundColor = '#F44336';
                }, 2000);
            }
        }
    </script>
    <script>
        // Fun√ß√£o para ativar sistema (torna bot√£o invis√≠vel)
        function ativarSistema() {
            const container = document.getElementById('botao-ativar-container');
            if (container) {
                container.style.display = 'none';
                console.log('‚úÖ Sistema ativado em PopaBoreste.html - Bot√£o Ativar ocultado');
            }
        }
    </script>
    <script>
        // Script independente para replica√ß√£o DOCAGEM do PopaBoreste para input-z-popaboreste2
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const campoDocagem = document.getElementById('input-row1');
                
                if (campoDocagem) {
                    console.log('üîÑ Configurando replica√ß√£o DOCAGEM do PopaBoreste para input-z-popaboreste2');
                    
                    campoDocagem.addEventListener('input', function() {
                        const valor = campoDocagem.value;
                        console.log(`üìù PopaBoreste DOCAGEM alterado: "${valor}"`);
                        
                        // Enviar dados para input-z-popaboreste2 no controle.html
                        setTimeout(() => {
                            fetch('/api/dados', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ 'operador_popa_boreste': valor })
                            }).then(response => response.json())
                            .then(data => console.log('‚úÖ operador_popa_boreste (input-z-popaboreste2):', valor))
                            .catch(error => console.error('‚ùå Erro ao replicar:', error));
                        }, 100);
                    });
                    
                    console.log('‚úÖ Replica√ß√£o DOCAGEM para input-z-popaboreste2 configurada no PopaBoreste.html');
                }
            }, 2000); // Aguardar 2 segundos para garantir que tudo carregou
        });
    </script>
</body>
</html>
